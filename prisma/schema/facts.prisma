model fact {
  id String @id @default(nanoid())

  body String

  tags relationship[]

  userId String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@unique([userId, body])
}

model tag {
  id String @id @default(nanoid())

  body String

  vector Unsupported("vector(768)")?

  userId String

  facts relationship[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@unique([userId, body])
}

model relationship {
  id String @id @default(nanoid())

  factId String
  tagId  String

  fact fact @relation(fields: [factId], references: [id], onDelete: Cascade)
  tag  tag  @relation(fields: [tagId], references: [id], onDelete: Cascade)

  userId String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}
